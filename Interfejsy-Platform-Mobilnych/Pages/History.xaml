<Page
    x:Class="Interfejsy_Platform_Mobilnych.History"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Interfejsy_Platform_Mobilnych"
    xmlns:local1="using:Interfejsy_Platform_Mobilnych.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <ScrollViewer>
            <StackPanel Margin="5" >
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Waluta: "/>
                    <TextBlock Text="{x:Bind ViewModel.SelectedCurrency}"/>
                </StackPanel>
                <TextBlock HorizontalAlignment="Center">Zakres dat:</TextBlock>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                    <CalendarDatePicker PlaceholderText="Start date" Name="StartDate" MinDate="{x:Bind ViewModel.MinDate}" MaxDate="{x:Bind ViewModel.MaxDate}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <CalendarDatePicker PlaceholderText="End date" Name="EndDate" MinDate="{x:Bind ViewModel.MinDate}" MaxDate="{x:Bind ViewModel.MaxDate}" HorizontalAlignment="Center"/>
                </StackPanel>
                <TextBlock Name="InfoTextBlock" Visibility="Collapsed" Text="*Data początkowa musi być wcześniejsza od daty końcowej." HorizontalAlignment="Center" FontStyle="Italic"></TextBlock>
                <Button Name="GenerateButton" Click="GenerateButton_Click"  Content="Genetuj wykres" HorizontalAlignment="Center" IsTapEnabled="False"></Button>

                <TextBlock Text="Wykres"></TextBlock>
                <InkCanvas Name="InkCanvans" Height="200" ></InkCanvas>

                <TextBlock>Postęp wczytania nowych danych</TextBlock>
                <ProgressBar></ProgressBar>

                <TextBlock>Zapisanych lokalnie</TextBlock>
                <ProgressBar></ProgressBar>

                <ItemsControl x:Name="tStack" Grid.Column="0" ItemsSource="{x:Bind ViewModel.Progress}" HorizontalContentAlignment="Stretch">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Grid />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="local1:Progress">
                            <ProgressBar Name="Downloaded" Minimum="{x:Bind downloadedMinimum}" Maximum="{x:Bind downloadedMaximum}" Value="{x:Bind downloadedValue}" HorizontalContentAlignment="Stretch"></ProgressBar>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                

                <ProgressRing  IsActive="True"></ProgressRing>
                

            </StackPanel>
        </ScrollViewer>
        <CommandBar VerticalAlignment="Bottom">
            <AppBarButton Icon="Save" Label="Zapisz jako obraz"/>
        </CommandBar>

    </Grid>
</Page>
